<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>ExprTest</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) chenc118 @ 2018</td></tr><tr><th>License</th><td>WTFPL</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>MSDOS</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">ExprTest</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Various Stuff to help test things</a></li><li><a href="#section.orphans">Orphan instances</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Note not a lot of testing has been done due to running out of time, most of the basic cases should be covered, and the code here contains some things to test things further.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:sampleExpr">sampleExpr</a> :: <a href="ExprType.html#t:Expr">Expr</a> Double</li><li class="src short"><a href="#v:sampleAddNorm1">sampleAddNorm1</a> :: Bool</li><li class="src short"><a href="#v:sampleAddNorm2">sampleAddNorm2</a> :: Bool</li><li class="src short"><a href="#v:sampleAddNorm3">sampleAddNorm3</a> :: Bool</li><li class="src short"><a href="#v:sampleAddNorm4">sampleAddNorm4</a> :: Bool</li><li class="src short"><a href="#v:sampleAddNorm5">sampleAddNorm5</a> :: Bool</li><li class="src short"><a href="#v:sampleMultNorm1">sampleMultNorm1</a> :: Bool</li><li class="src short"><a href="#v:sampleMultNorm2">sampleMultNorm2</a> :: Bool</li><li class="src short"><a href="#v:sampleMultNorm3">sampleMultNorm3</a> :: Bool</li><li class="src short"><a href="#v:addNormGauntlet">addNormGauntlet</a> :: Bool</li><li class="src short"><a href="#v:multNormGauntlet">multNormGauntlet</a> :: Bool</li><li class="src short"><a href="#v:sampleAdd">sampleAdd</a> :: (Show a, Ord a, Num a) =&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; Bool</li><li class="src short"><a href="#v:sampleMult">sampleMult</a> :: (Show a, Ord a, Num a) =&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; Bool</li><li class="src short"><a href="#v:genBranches">genBranches</a> :: Eq a =&gt; (<a href="ExprType.html#t:Expr">Expr</a> a -&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; <a href="ExprType.html#t:Expr">Expr</a> a) -&gt; [<a href="ExprType.html#t:Expr">Expr</a> a] -&gt; [<a href="ExprType.html#t:Expr">Expr</a> a]</li><li class="src short"><a href="#v:verifyAddNormality">verifyAddNormality</a> :: (Show a, Ord a, Num a) =&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; Bool</li><li class="src short"><a href="#v:verifyMultNormality">verifyMultNormality</a> :: (Show a, Ord a, Num a) =&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; Bool</li><li class="src short"><a href="#v:verifyMultNormlality">verifyMultNormlality</a> :: (Show a, Ord a, Num a) =&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; Bool</li><li class="src short"><a href="#v:verifyNormality">verifyNormality</a> :: (Show a, Ord a, Num a) =&gt; (<a href="ExprType.html#t:Expr">Expr</a> a -&gt; <a href="ExprType.html#t:Expr">Expr</a> a) -&gt; (<a href="ExprType.html#t:Expr">Expr</a> a -&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; <a href="ExprType.html#t:Expr">Expr</a> a) -&gt; (<a href="ExprType.html#t:Expr">Expr</a> a -&gt; [<a href="ExprType.html#t:Expr">Expr</a> a]) -&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; Bool</li><li class="src short"><a href="#v:vnHelper">vnHelper</a> :: (Show a, Eq a) =&gt; [<a href="ExprType.html#t:Expr">Expr</a> a] -&gt; (<a href="ExprType.html#t:Expr">Expr</a> a -&gt; <a href="ExprType.html#t:Expr">Expr</a> a) -&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; Bool</li><li class="src short"><a href="#v:mathExamQuestion">mathExamQuestion</a> :: <a href="ExprType.html#t:Expr">Expr</a> Double</li><li class="src short"><a href="#v:verifyExamQuestion">verifyExamQuestion</a> :: Bool</li><li class="src short"><a href="#v:simplifyProp">simplifyProp</a> :: <a href="ExprType.html#t:Expr">Expr</a> Double -&gt; Bool</li><li class="src short"><a href="#v:isNan">isNan</a> :: RealFloat a =&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; Bool</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:sampleExpr" class="def">sampleExpr</a> :: <a href="ExprType.html#t:Expr">Expr</a> Double <a href="#v:sampleExpr" class="selflink">#</a></p><div class="doc"><p>Random sample expression \[x + y\]</p></div></div><div class="top"><p class="src"><a id="v:sampleAddNorm1" class="def">sampleAddNorm1</a> :: Bool <a href="#v:sampleAddNorm1" class="selflink">#</a></p><div class="doc"><p>Sample tests (To make sure any changes don't break basic cases)</p><p>Tests that \[x + x\] normalizes to \[2x\]</p></div></div><div class="top"><p class="src"><a id="v:sampleAddNorm2" class="def">sampleAddNorm2</a> :: Bool <a href="#v:sampleAddNorm2" class="selflink">#</a></p><div class="doc"><p>Tests that \[(x+y)(x+z)\] normalizes to \[x^2 + xy + xz + yz\]</p></div></div><div class="top"><p class="src"><a id="v:sampleAddNorm3" class="def">sampleAddNorm3</a> :: Bool <a href="#v:sampleAddNorm3" class="selflink">#</a></p><div class="doc"><p>Tests that \[2xy + 2x(x+y)\] normalizes to \[5x^2+7xy\]</p></div></div><div class="top"><p class="src"><a id="v:sampleAddNorm4" class="def">sampleAddNorm4</a> :: Bool <a href="#v:sampleAddNorm4" class="selflink">#</a></p><div class="doc"><p>Tests that \[5ln(xy)+5+ln(x)\] normalizes to \[5 + 6ln(x) + 5ln(y)\]</p></div></div><div class="top"><p class="src"><a id="v:sampleAddNorm5" class="def">sampleAddNorm5</a> :: Bool <a href="#v:sampleAddNorm5" class="selflink">#</a></p><div class="doc"><p>Tests that \[98x(5+i+ln(y)+z)+xln(xy)\] normalizes to \[490x + 98ix + 98xz + xln(x) + 99xln(y)\]</p></div></div><div class="top"><p class="src"><a id="v:sampleMultNorm1" class="def">sampleMultNorm1</a> :: Bool <a href="#v:sampleMultNorm1" class="selflink">#</a></p><div class="doc"><p>Tests that \[5 * x * cos (5) * x^2 \] normalizes to \[5x^3cos(5)\]</p></div></div><div class="top"><p class="src"><a id="v:sampleMultNorm2" class="def">sampleMultNorm2</a> :: Bool <a href="#v:sampleMultNorm2" class="selflink">#</a></p><div class="doc"><p>Tests that \[25xy*cos(x)*(x^{2^{2^{2^{2^2}}}})*(x^32)\] normalizes to \[25x^{65}y cos(x)\]</p></div></div><div class="top"><p class="src"><a id="v:sampleMultNorm3" class="def">sampleMultNorm3</a> :: Bool <a href="#v:sampleMultNorm3" class="selflink">#</a></p><div class="doc"><p>Tests that \[ln(x^2)*4*x^3*x^4\] normalizes to \[8 x^7 ln(x)\]</p></div></div><div class="top"><p class="src"><a id="v:addNormGauntlet" class="def">addNormGauntlet</a> :: Bool <a href="#v:addNormGauntlet" class="selflink">#</a></p><div class="doc"><p>Tests all the SampleAddNorms</p></div></div><div class="top"><p class="src"><a id="v:multNormGauntlet" class="def">multNormGauntlet</a> :: Bool <a href="#v:multNormGauntlet" class="selflink">#</a></p><div class="doc"><p>Tests all the SampleMultNorms</p></div></div><h1 id="g:1">Various Stuff to help test things</h1><div class="top"><p class="src"><a id="v:sampleAdd" class="def">sampleAdd</a> :: (Show a, Ord a, Num a) =&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; Bool <a href="#v:sampleAdd" class="selflink">#</a></p><div class="doc"><p>Basic testing of a sample add expression tests all possible branches</p></div></div><div class="top"><p class="src"><a id="v:sampleMult" class="def">sampleMult</a> :: (Show a, Ord a, Num a) =&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; Bool <a href="#v:sampleMult" class="selflink">#</a></p><div class="doc"><p>Basic testing of a sample mult expression tests all possible branches of both list and normal form</p></div></div><div class="top"><p class="src"><a id="v:genBranches" class="def">genBranches</a> :: Eq a =&gt; (<a href="ExprType.html#t:Expr">Expr</a> a -&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; <a href="ExprType.html#t:Expr">Expr</a> a) -&gt; [<a href="ExprType.html#t:Expr">Expr</a> a] -&gt; [<a href="ExprType.html#t:Expr">Expr</a> a] <a href="#v:genBranches" class="selflink">#</a></p><div class="doc"><p>Generates all possible ways to distribute a list of either a Mult or Add expression (turns out there's a lot of different ways) Approximate complexity formula ~= 2*(n!)</p></div></div><div class="top"><p class="src"><a id="v:verifyAddNormality" class="def">verifyAddNormality</a> :: (Show a, Ord a, Num a) =&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; Bool <a href="#v:verifyAddNormality" class="selflink">#</a></p><div class="doc"><p>Verifies that an addition expression will normalize the same way no matter how the binary Add tree may be distributed</p></div></div><div class="top"><p class="src"><a id="v:verifyMultNormality" class="def">verifyMultNormality</a> :: (Show a, Ord a, Num a) =&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; Bool <a href="#v:verifyMultNormality" class="selflink">#</a></p><div class="doc"><p>Verifies that a multiplication expression will normalize the same way no matter how the binary Mult tree may be distributed</p></div></div><div class="top"><p class="src"><a id="v:verifyMultNormlality" class="def">verifyMultNormlality</a> :: (Show a, Ord a, Num a) =&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; Bool <a href="#v:verifyMultNormlality" class="selflink">#</a></p><div class="doc"><p>verifies that a multiplication expression will normalize the same way no matter how the binary Mult tree may be distributed</p></div></div><div class="top"><p class="src"><a id="v:verifyNormality" class="def">verifyNormality</a> :: (Show a, Ord a, Num a) =&gt; (<a href="ExprType.html#t:Expr">Expr</a> a -&gt; <a href="ExprType.html#t:Expr">Expr</a> a) -&gt; (<a href="ExprType.html#t:Expr">Expr</a> a -&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; <a href="ExprType.html#t:Expr">Expr</a> a) -&gt; (<a href="ExprType.html#t:Expr">Expr</a> a -&gt; [<a href="ExprType.html#t:Expr">Expr</a> a]) -&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; Bool <a href="#v:verifyNormality" class="selflink">#</a></p><div class="doc"><p>Generic verify that some expression with a binary tree structure will normalize to the same thing</p></div></div><div class="top"><p class="src"><a id="v:vnHelper" class="def">vnHelper</a> :: (Show a, Eq a) =&gt; [<a href="ExprType.html#t:Expr">Expr</a> a] -&gt; (<a href="ExprType.html#t:Expr">Expr</a> a -&gt; <a href="ExprType.html#t:Expr">Expr</a> a) -&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; Bool <a href="#v:vnHelper" class="selflink">#</a></p><div class="doc"><p>Helper for the verify normality functions, spits a verbose error detailing edge case if it finds something wrong</p></div></div><div class="top"><p class="src"><a id="v:mathExamQuestion" class="def">mathExamQuestion</a> :: <a href="ExprType.html#t:Expr">Expr</a> Double <a href="#v:mathExamQuestion" class="selflink">#</a></p><div class="doc"><p>A question on the 1ZB3 Exam, copied after having to take derivative multiple times in order to verify it (gets very messy)</p></div></div><div class="top"><p class="src"><a id="v:verifyExamQuestion" class="def">verifyExamQuestion</a> :: Bool <a href="#v:verifyExamQuestion" class="selflink">#</a></p><div class="doc"><p>Question = d^2g(u,v)/dudv where g (u,v) = (u+v) / (uv^2) where u = 1, v = 3,
    answer found = 1/9 (was C or D on version 4) (forgot if it was -1/9 or 1/9, w/e was on the Exam, there was only 1 Answer w/ 1/9 as absolute value)
    (Assuming 1/9 cause that's what this program got) 
    (If I got the values of u and v confused still doesn't matter for some reason swapping the two gets 1/9 as well)</p></div></div><div class="top"><p class="src"><a id="v:simplifyProp" class="def">simplifyProp</a> :: <a href="ExprType.html#t:Expr">Expr</a> Double -&gt; Bool <a href="#v:simplifyProp" class="selflink">#</a></p><div class="doc"><p>Simplify property, once simplified you cannot simplify any further, Causes frequent stack overflows.</p></div></div><div class="top"><p class="src"><a id="v:isNan" class="def">isNan</a> :: RealFloat a =&gt; <a href="ExprType.html#t:Expr">Expr</a> a -&gt; Bool <a href="#v:isNan" class="selflink">#</a></p><div class="doc"><p>Check if a constant in an expression is NaN, entire function will likely eval to NaN</p></div></div><h1>Orphan instances</h1><div id="section.orphans" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:o:ic:Arbitrary:Arbitrary:1" class="instance expander" onclick="toggleSection('i:o:ic:Arbitrary:Arbitrary:1')"></span> Arbitrary (<a href="ExprType.html#t:Expr">Expr</a> Double)</span> <a href="#v:-36-fArbitraryExpr2" class="selflink">#</a></td><td class="doc"><p>generic arbitrary double</p></td></tr><tr><td colspan="2"><div id="section.i:o:ic:Arbitrary:Arbitrary:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arbitrary">arbitrary</a> :: Gen (<a href="ExprType.html#t:Expr">Expr</a> Double)</p><p class="src"><a href="#v:shrink">shrink</a> :: <a href="ExprType.html#t:Expr">Expr</a> Double -&gt; [<a href="ExprType.html#t:Expr">Expr</a> Double]</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:o:ic:Arbitrary:Arbitrary:2" class="instance expander" onclick="toggleSection('i:o:ic:Arbitrary:Arbitrary:2')"></span> Arbitrary (<a href="ExprType.html#t:Expr">Expr</a> Float)</span> <a href="#v:-36-fArbitraryExpr1" class="selflink">#</a></td><td class="doc"><p>generic arbitrary float</p></td></tr><tr><td colspan="2"><div id="section.i:o:ic:Arbitrary:Arbitrary:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arbitrary">arbitrary</a> :: Gen (<a href="ExprType.html#t:Expr">Expr</a> Float)</p><p class="src"><a href="#v:shrink">shrink</a> :: <a href="ExprType.html#t:Expr">Expr</a> Float -&gt; [<a href="ExprType.html#t:Expr">Expr</a> Float]</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:o:ic:Arbitrary:Arbitrary:3" class="instance expander" onclick="toggleSection('i:o:ic:Arbitrary:Arbitrary:3')"></span> Arbitrary (<a href="ExprType.html#t:Expr">Expr</a> Int)</span> <a href="#v:-36-fArbitraryExpr" class="selflink">#</a></td><td class="doc"><p>generic arbitrary int</p></td></tr><tr><td colspan="2"><div id="section.i:o:ic:Arbitrary:Arbitrary:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arbitrary">arbitrary</a> :: Gen (<a href="ExprType.html#t:Expr">Expr</a> Int)</p><p class="src"><a href="#v:shrink">shrink</a> :: <a href="ExprType.html#t:Expr">Expr</a> Int -&gt; [<a href="ExprType.html#t:Expr">Expr</a> Int]</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:o:ic:Arbitrary:Arbitrary:4" class="instance expander" onclick="toggleSection('i:o:ic:Arbitrary:Arbitrary:4')"></span> Arbitrary (<a href="ExprType.html#t:Expr">Expr</a> Integer)</span> <a href="#v:-36-fArbitraryExpr0" class="selflink">#</a></td><td class="doc"><p>generic arbitrary integer</p></td></tr><tr><td colspan="2"><div id="section.i:o:ic:Arbitrary:Arbitrary:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arbitrary">arbitrary</a> :: Gen (<a href="ExprType.html#t:Expr">Expr</a> Integer)</p><p class="src"><a href="#v:shrink">shrink</a> :: <a href="ExprType.html#t:Expr">Expr</a> Integer -&gt; [<a href="ExprType.html#t:Expr">Expr</a> Integer]</p></div></div></td></tr></table></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>