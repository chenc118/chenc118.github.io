<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>ExprParser</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) chenc118 @ 2018</td></tr><tr><th>License</th><td>WTFPL</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>MSDOS</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">ExprParser</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contains everything used to parse a string into an expression.
For explanation of how the expression is shown in the REPL output see <a href="ExprPretty.html">ExprPretty</a></p><p><strong>Basic binary operators</strong></p><p><strong><code>!+</code></strong> : Creates an <code><a href="ExprType.html#v:Add">Add</a></code> expression and is left associative </p><p>to parse [2+3+4] </p><pre>&gt;&gt;&gt; parseExprI &quot;2!+3!+4&quot;
(((val 2)!+(val 3))!+(val 4))
</pre><p><strong><code>!*</code></strong> : Creates a <code><a href="ExprType.html#v:Mult">Mult</a></code> expression and is left associative</p><p>to parse \[(2) (3) (4)\]</p><pre>&gt;&gt;&gt; parseExprI &quot;2!*3!*4&quot;
(((val 2)!*(val 3))!*(val 4))
</pre><p><strong><code>!^</code></strong> : Creates a <code><a href="ExprType.html#v:Exp">Exp</a></code> expression and is left associative</p><p>to parse \[ 2^{3^4}\]</p><pre>&gt;&gt;&gt; parseExprI &quot;2!^3!^4&quot;
(((val 2)!^(val 3))!^(val 4))
</pre><p>With the operators exponentiation takes precedence over multiplication which takes precedence over addition</p><p>to parse \[ 1 + 5x^2 \]</p><pre>&gt;&gt;&gt; parseExprI &quot;1!+5!*x!^2&quot;
((val 1)!+((val 5)!*((Var &quot;x&quot;)!^(val 2))))
</pre><p>Surrounding an expression with (...) will ensure that the stuff inside the brackets is evaluated first followed by whatever is outside</p><p>to parse \[(1+5x)^2\]</p><pre>&gt;&gt;&gt; parseExprI &quot;(1!+5!*x)!^2&quot;
(((val 1)!+((val 5)!*(Var &quot;x&quot;)))!^(val 2))
</pre><p><strong>Unary operators</strong></p><p>Unary operators are generally of the form name(...). Parenthesis are not needed if the value inside is a single variable or constant but recommended for clarity</p><p><strong>cos</strong> : parses a cosine expression</p><p>to parse \[cos (x) \]</p><pre>&gt;&gt;&gt; parseExprI &quot;cosx&quot;
(exCos(Var &quot;x&quot;))
&gt;&gt;&gt; parseExprI &quot;cos(x)&quot;
(exCos(Var &quot;x&quot;))
</pre><p><strong>sin</strong> : parses a sine expression</p><p>to parse \[ sin (x) \]</p><pre>&gt;&gt;&gt; parseExprI &quot;sinx&quot;
(exSin(Var &quot;x&quot;))
&gt;&gt;&gt; parseExprI &quot;sin(x)&quot;
(exSin(Var &quot;x&quot;))
</pre><p><strong>ln</strong> : parses a natural logarithm</p><p>to parse \[ ln (x)\]</p><pre>&gt;&gt;&gt; parseExprI &quot;lnx&quot;
(exLn(Var &quot;x&quot;))
&gt;&gt;&gt; parseExprI &quot;ln(x)&quot;
(exLn(Var &quot;x&quot;))
</pre><p><strong>e^</strong> : parses a natural exponent</p><p>to parse \[ e^{(2+x)} \]</p><pre>&gt;&gt;&gt; parseExprI &quot;e^(2!+x)&quot;
(exNExp((val 2)!+(Var &quot;x&quot;)))
</pre><p><strong>Parsing other types</strong></p><p>The <code><a href="ExprType.html#t:Expr">Expr</a></code> type does not contain division however it can be expressed by multiplying with an exponent to -1.</p><p>to parse \[ \frac{x}{y}\]</p><pre>&gt;&gt;&gt; parseExprI &quot;x!*y!^-1&quot;
((Var &quot;x&quot;)!*((Var &quot;y&quot;)!^(val -1)))
</pre><p>As the <code><a href="ExprType.html#t:Expr">Expr</a></code> type does not contain subtraction however this can be done by adding with a multiplication of -1</p><p>to parse \[x-y\]</p><pre>&gt;&gt;&gt; parseExprI &quot;x!+(-1!*y)&quot;
((Var &quot;x&quot;)!+((val -1)!*(Var &quot;y&quot;)))
</pre><p>To parse a log base you can use the log base formula of ln(a)/ln(b)</p><p>So to parse \[\log_{2}(x)\]</p><pre>&gt;&gt;&gt; parseExprI &quot;ln(x)!*(ln(2)!^-1)&quot;
((exLn(Var &quot;x&quot;))!*((exLn(val 2))!^(val -1)))
</pre><p>Constants are parsed based on the format of the individual parse see <code><a href="ExprParser.html#v:parseExprD">parseExprD</a></code> <code><a href="ExprParser.html#v:parseExprI">parseExprI</a></code> <code><a href="ExprParser.html#v:parseExprF">parseExprF</a></code> <code><a href="ExprParser.html#v:parseExprInt">parseExprInt</a></code></p><p>Variables are any alphatnumeric sequence that cannot be parsed into anything else</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:parseExprD">parseExprD</a> :: String -&gt; <a href="ExprType.html#t:Expr">Expr</a> Double</li><li class="src short"><a href="#v:parseExprF">parseExprF</a> :: String -&gt; <a href="ExprType.html#t:Expr">Expr</a> Float</li><li class="src short"><a href="#v:parseExprI">parseExprI</a> :: String -&gt; <a href="ExprType.html#t:Expr">Expr</a> Integer</li><li class="src short"><a href="#v:parseExprInt">parseExprInt</a> :: String -&gt; <a href="ExprType.html#t:Expr">Expr</a> Int</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:parseExprD" class="def">parseExprD</a> <a href="#v:parseExprD" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>The string to be parsed </p></td></tr><tr><td class="src">-&gt; <a href="ExprType.html#t:Expr">Expr</a> Double</td><td class="doc"><p>The resulting parsed Double Expr</p></td></tr></table></div><div class="doc"><p>Parses an expression with double constants. With the double being of the format <code>(-)<a id="."></a>e(-)#</code> </p><p>where (-) indicates that you can put a &quot;-&quot; sign in that position  
       # indicates any number. </p><p>The decmial and the exponentiation can be omitted i.e.</p><pre>4
4.12
4e12</pre><p>are all acceptable</p></div></div><div class="top"><p class="src"><a id="v:parseExprF" class="def">parseExprF</a> <a href="#v:parseExprF" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>The string to be parsed </p></td></tr><tr><td class="src">-&gt; <a href="ExprType.html#t:Expr">Expr</a> Float</td><td class="doc"><p>The resulting parsed Float Expr</p></td></tr></table></div><div class="doc"><p>Parses an expression with float constants. With the float being of the format <code>(-)<a id="."></a>e(-)#</code> </p><p>where (-) indicates that you can put a &quot;-&quot; sign in that position,
       # indicates any number. </p><p>The decmial and the exponentiation can be omitted i.e.</p><pre>4
4.12
4e12</pre><p>are all acceptable</p><p>Note there may be loss of precision with very large or small numbers, using <code><a href="ExprParser.html#v:parseExprD">parseExprD</a></code> may help slightly</p></div></div><div class="top"><p class="src"><a id="v:parseExprI" class="def">parseExprI</a> <a href="#v:parseExprI" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>The string to be parsed</p></td></tr><tr><td class="src">-&gt; <a href="ExprType.html#t:Expr">Expr</a> Integer</td><td class="doc"><p>The resulting parsed Integer Expr</p></td></tr></table></div><div class="doc"><p>Parses an expression with Integer constants. With the integer being of the format <code>(-)#</code></p><p>where (-) indicates that you can put a &quot;-&quot; sign in that position, # indicates any number </p><p>i.e.</p><pre>4
-42</pre><p>are all acceptable</p></div></div><div class="top"><p class="src"><a id="v:parseExprInt" class="def">parseExprInt</a> <a href="#v:parseExprInt" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>The string to be parsed</p></td></tr><tr><td class="src">-&gt; <a href="ExprType.html#t:Expr">Expr</a> Int</td><td class="doc"><p>The resulting parsed Int Expr</p></td></tr></table></div><div class="doc"><p>Parses an expression with Int constants. With the integer being of the format <code>(-)#</code></p><p>where (-) indicates that you can put a &quot;-&quot; sign in that position, # indicates any number </p><p>i.e.</p><pre>4
-42</pre><p>are all acceptable</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>